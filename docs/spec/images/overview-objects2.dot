// This is the overview graph for object refrences in the control plane.
//
// To reproduce the PNG, run the following:
// $ dot -Tpng overview-objects2.dot -o overview-objects2.png
//
digraph G {
  rankdir=LR;
  node[shape=record];
  graph [pad="1.25"];

  Prov [label="<k> kind:Provisioner|<t> EventType [0..*]"];

  EventType [label="<k> kind:EventType"];

  Source [label="<k> kind:Source|<p> Provisioner [1..1]"];

  Flow [label="<k> kind:Flow|<s> Source [0..*]|<a> Sink [1..1]|Trigger[0..*]|<tt> t.EventType"];

  Chan [label="<k> kind:Channel|<p> Provisioner [1..1]"];

  Sub [label="<k> kind:Subscription|<t> EventType [0..1]|<a> Action [1..1]|<p> Publisher [1..1]"];

  Sinks [shape=rectangle style=dashed; label="Service\nRoute\nRevision\nDNS Name"];

  Prov:t -> EventType:k;

  Source:p -> Prov:k;

  Flow:s -> Source:k;
  Flow:tt -> EventType:k;
  Flow:a -> Sinks;

  Chan:p -> Prov:k;

  Sub:t -> EventType:k;
  Sub:p -> Source:k;
  Sub:p -> Chan:k;
  Sub:a -> Chan:k;
  Sub:a -> Sinks;

  {rank=same; Flow; Sub}
//  {rank=max; Chan; Bus;}
//  {rank=max; Bus;}
//  {rank=min; Source; Prov; EventType;}
  {rank=min; Flow;}
  {rank=max; Sinks;}
}
